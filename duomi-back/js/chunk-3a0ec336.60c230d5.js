(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a0ec336"],{"0b64":function(e,t,r){var n=r("f772"),a=r("9003"),o=r("5168")("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},1173:function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},"2d7d":function(e,t,r){e.exports=r("5037")},3594:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table"},[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 订单列表")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"种类筛选"},model:{value:e.queryInfo.comboId,callback:function(t){e.$set(e.queryInfo,"comboId",t)},expression:"queryInfo.comboId"}},e._l(e.combo,function(e){return r("el-option",{key:e.id,attrs:{label:e.cname,value:e.id}})}),1),r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.salesModel,callback:function(t){e.salesModel=t},expression:"salesModel"}}),e._v("  \n\t\t\t\t"),r("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.getOrderBy}},[e._v("搜索")])],1),r("el-table",{ref:"salesOrderTable",staticClass:"table",attrs:{"header-cell-style":{background:"#eef1f6",color:"#606266"},data:e.data,border:"","row-key":"id"},on:{"expand-change":e.getSalesOrderLine}},[r("el-table-column",{attrs:{label:"展开",width:"60",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-table",{staticClass:"table",attrs:{"row-style":{"background-color":"rgba(7,196,168,0.1)"},data:e.row.salesOrderLines,"row-key":"id",border:""}},[r("el-table-column",{attrs:{prop:"index",label:"序号",width:"60",align:"center"}}),r("el-table-column",{attrs:{prop:"customer.nickname",label:"用户",align:"center"}}),r("el-table-column",{attrs:{prop:"orderTime",label:"下单时间",align:"center"}}),r("el-table-column",{attrs:{prop:"combo.cname",label:"套餐",align:"center"}}),r("el-table-column",{attrs:{prop:"payRecord.status",label:"支付状态",align:"center"}}),r("el-table-column",{attrs:{prop:"payRecord.amount",label:"支付金额",align:"center"}}),r("el-table-column",{attrs:{prop:"payRecord.useDomidou",label:"使用哆咪豆",align:"center"}})],1)]}}])}),r("el-table-column",{attrs:{prop:"index",label:"序号",width:"60",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"发起人用户名",width:"110",align:"center"}}),r("el-table-column",{attrs:{prop:"tel",label:"联系方式",width:"110",sortable:"",align:"center"}}),r("el-table-column",{attrs:{prop:"cname",label:"套餐名称",sortable:"",align:"center"}}),r("el-table-column",{attrs:{prop:"orderNumber",label:"订单号",sortable:"",align:"center"}}),r("el-table-column",{attrs:{prop:"orderTime",label:"下单时间",width:"140",align:"center"}}),r("el-table-column",{attrs:{prop:"orderType",label:"订单类型",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"expectReachTime",label:"期望送达时间",width:"140",align:"center"}}),r("el-table-column",{attrs:{prop:"finalPrice",label:"最终价格(元)",width:"110",align:"center"}})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"","page-size":e.pageInfo.pageSize,layout:"prev, pager, next",total:e.pageInfo.totalData},on:{"current-change":e.pageChange}})],1)],1)])},a=[],o=(r("ac6a"),r("2d7d")),i=r.n(o),s={name:"basetable",data:function(){return{listUrl:"order/listAllOrder",listComboUrl:"combo/listCombo",listSalesOrderLine:"order/listSalesOrderLine",combo:[],onlinTypes:["上架","下架"],salesModels:[],fileName:"img",salesModel:[],fileList:[],limit:1,withCredentials:!0,addVisible:!1,editVisible:!1,delVisible:!1,queryInfo:{comboId:"",query:"",orderTime:"",endTime:""},pageInfo:{pageNo:1,totalPage:1},validateOnRuleChange:!1,salesOrderLineMap:new i.a,currentSalesOrderLine:[],payStatus:["未支付","已支付","退款中","退款成功"]}},created:function(){this.getRawOrderList(),this.getComboNameList(),this.editUrl=this.$urlConfig.baseUrl+this.editUrl,this.addUrl=this.$urlConfig.baseUrl+this.addUrl,this.listComboUrl=this.$urlConfig.baseUrl+this.listComboUrl},computed:{data:function(){var e=this;return e.salesModels.map(function(t,r){var n={index:r+1,id:t.id,name:t.customer.nickname,tel:t.customer.tel,cname:t.combo.cname,orderNumber:t.orderNumber,orderTime:e.$util.getYMDHmString(t.orderTime),orderType:t.groupNumber+"人("+["团拼","个人"][t.status]+")",expectReachTime:e.$util.getYMDHmString(t.expectReachTime),finalPrice:t.finalPrice};return t.salesOrderLines&&(n.salesOrderLines=t.salesOrderLines.map(function(t,r){return t.payRecordModel||(t.payRecordModel={status:"待支付"}),{index:r+1,id:t.id,orderTime:e.$util.getYMDHmString(t.orderTime),leaderOrderFlag:t.leaderOrderFlag,counts:t.counts,customer:{id:t.customer.id,avatarUrl:t.customer.avatarUrl,nickname:t.customer.nickname},combo:{id:t.combo.id,cname:t.combo.cname},payRecord:{status:t.payRecordModel.status,amount:t.payRecordModel.amount,useDomidou:t.payRecordModel.useDomidou}}})),n})}},methods:{subTableClass:function(){return"sub-table"},getOrderBy:function(){this.pageInfo.pageNo="1",this.getRawOrderList()},handleEdit:function(e,t){var r=this;r.idx=e;r.data[e];console.log("1122="+food.id),r.form={id:food.id},r.fileList=[],r.editVisible=!0},getRawOrderList:function(){var e=this,t=e.assembleQueryUrl();e.$jsonAxios.get(t).then(function(t){var r=t.data;if(r.code==e.$util.success_code){e.salesModels=r.data.data;var n=r.data.page;e.pageInfo={pageNO:n.pageNO,pageSize:n.pageSize,totalData:n.totalData}}else e.$message.error("错误码："+r.code+" "+r.message)}).catch(function(t){e.$util.axiosErrorHandler(t,e)})},getComboNameList:function(){var e=this,t=e.listComboUrl+"?pageSize="+e.$util.maxPageSize;e.$jsonAxios.get(t).then(function(t){var r=t.data;r.code==e.$util.success_code?e.combo=r.data.data:e.$message.error("错误码："+r.code+" "+r.message)}).catch(function(t){e.$util.axiosErrorHandler(t,e)})},assembleQueryUrl:function(){var e=this.pageInfo;this.queryInfo.orderTime=this.salesModel[0],this.queryInfo.endTime=this.salesModel[1];var t=this.queryInfo,r={};return this.$util.assembleNewParamsWithNoUndefinedNullProperty(r,e),this.$util.assembleNewParamsWithNoUndefinedNullProperty(r,t),this.listUrl+"?"+this.$qs.stringify(r)},pageChange:function(e){this.pageInfo.pageNo=e,this.getRawOrderList()},getSalesOrderLine:function(e,t){var r=this;e.salesOrderLines||r.fetchFromBackEnd(e.id)},fetchFromBackEnd:function(e){var t=this,r=t.listSalesOrderLine+"?salesOrderId="+e;t.$jsonAxios.get(r).then(function(r){var n=r.data;t.$util.checkIfDataSuccess(n)?t.salesModels.forEach(function(t){t.id===e&&(t.salesOrderLines=n.data)}):t.$message.error("错误码："+n.code+" "+n.message)}).catch(function(e){t.$util.axiosErrorHandler()})}}},l=s,c=(r("9bf6"),r("2877")),u=Object(c["a"])(l,n,a,!1,null,"21881e9c",null);u.options.__file="order-list.vue";t["default"]=u.exports},3702:function(e,t,r){var n=r("481b"),a=r("5168")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},"40c3":function(e,t,r){var n=r("6b4c"),a=r("5168")("toStringTag"),o="Arguments"==n(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(r){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=i(t=Object(e),a))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},4517:function(e,t,r){var n=r("a22a");e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},"4c95":function(e,t,r){"use strict";var n=r("e53d"),a=r("584a"),o=r("d9f6"),i=r("8e60"),s=r("5168")("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:n[e];i&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},5037:function(e,t,r){r("c207"),r("1654"),r("6c1c"),r("837d"),r("5cb6"),r("fe1e"),r("7554"),e.exports=r("584a").Map},"57b1":function(e,t,r){var n=r("d864"),a=r("335c"),o=r("241e"),i=r("b447"),s=r("bfac");e.exports=function(e,t){var r=1==e,l=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,b){for(var h,m,g=o(t),v=a(g),y=n(s,b,3),_=i(v.length),x=0,w=r?p(t,_):l?p(t,0):void 0;_>x;x++)if((f||x in v)&&(h=v[x],m=y(h,x,g),e))if(r)w[x]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:w.push(h)}else if(u)return!1;return d?-1:c||u?u:w}}},"5aee":function(e,t,r){"use strict";var n=r("d9f6").f,a=r("a159"),o=r("5c95"),i=r("d864"),s=r("1173"),l=r("a22a"),c=r("30f1"),u=r("50ed"),d=r("4c95"),f=r("8e60"),p=r("ebfd").fastKey,b=r("9f79"),h=f?"_s":"size",m=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=n&&l(n,r,e[c],e)});return o(u.prototype,{clear:function(){for(var e=b(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=b(this,t),n=m(r,e);if(n){var a=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=a),a&&(a.p=o),r._f==n&&(r._f=a),r._l==n&&(r._l=o),r[h]--}return!!n},forEach:function(e){b(this,t);var r,n=i(e,arguments.length>1?arguments[1]:void 0,3);while(r=r?r.n:this._f){n(r.v,r.k,this);while(r&&r.r)r=r.p}},has:function(e){return!!m(b(this,t),e)}}),f&&n(u.prototype,"size",{get:function(){return b(this,t)[h]}}),u},def:function(e,t,r){var n,a,o=m(e,t);return o?o.v=r:(e._l=o={i:a=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[h]++,"F"!==a&&(e._i[a]=o)),e},getEntry:m,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=b(e,t),this._k=r,this._l=void 0},function(){var e=this,t=e._k,r=e._l;while(r&&r.r)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?u(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,u(1))},r?"entries":"values",!r,!0),d(t)}}},"5c95":function(e,t,r){var n=r("35e8");e.exports=function(e,t,r){for(var a in t)r&&e[a]?e[a]=t[a]:n(e,a,t[a]);return e}},"5cb6":function(e,t,r){var n=r("63b6");n(n.P+n.R,"Map",{toJSON:r("f228")("Map")})},"68f7":function(e,t,r){"use strict";var n=r("63b6"),a=r("79aa"),o=r("d864"),i=r("a22a");e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,l=arguments[1];return a(this),t=void 0!==l,t&&a(l),void 0==e?new this:(r=[],t?(n=0,s=o(l,arguments[2],2),i(e,!1,function(e){r.push(s(e,n++))})):i(e,!1,r.push,r),new this(r))}})}},7075:function(e,t,r){"use strict";var n=r("63b6");e.exports=function(e){n(n.S,e,{of:function(){var e=arguments.length,t=new Array(e);while(e--)t[e]=arguments[e];return new this(t)}})}},7554:function(e,t,r){r("68f7")("Map")},"7cd6":function(e,t,r){var n=r("40c3"),a=r("5168")("iterator"),o=r("481b");e.exports=r("584a").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[n(e)]}},"837d":function(e,t,r){"use strict";var n=r("5aee"),a=r("9f79"),o="Map";e.exports=r("ada4")(o,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(a(this,o),e);return t&&t.v},set:function(e,t){return n.def(a(this,o),0===e?0:e,t)}},n,!0)},"92df":function(e,t,r){},"9bf6":function(e,t,r){"use strict";var n=r("92df"),a=r.n(n);a.a},"9f79":function(e,t,r){var n=r("f772");e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},a22a:function(e,t,r){var n=r("d864"),a=r("b0dc"),o=r("3702"),i=r("e4ae"),s=r("b447"),l=r("7cd6"),c={},u={};t=e.exports=function(e,t,r,d,f){var p,b,h,m,g=f?function(){return e}:l(e),v=n(r,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>y;y++)if(m=t?v(i(b=e[y])[0],b[1]):v(e[y]),m===c||m===u)return m}else for(h=g.call(e);!(b=h.next()).done;)if(m=a(h,v,b.value,t),m===c||m===u)return m};t.BREAK=c,t.RETURN=u},ada4:function(e,t,r){"use strict";var n=r("e53d"),a=r("63b6"),o=r("ebfd"),i=r("294c"),s=r("35e8"),l=r("5c95"),c=r("a22a"),u=r("1173"),d=r("f772"),f=r("45f2"),p=r("d9f6").f,b=r("57b1")(0),h=r("8e60");e.exports=function(e,t,r,m,g,v){var y=n[e],_=y,x=g?"set":"add",w=_&&_.prototype,O={};return h&&"function"==typeof _&&(v||w.forEach&&!i(function(){(new _).entries().next()}))?(_=t(function(t,r){u(t,_,e,"_c"),t._c=new y,void 0!=r&&c(r,g,t[x],t)}),b("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!v||"clear"!=e)&&s(_.prototype,e,function(r,n){if(u(this,_,e),!t&&v&&!d(r))return"get"==e&&void 0;var a=this._c[e](0===r?0:r,n);return t?this:a})}),v||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,g,x),l(_.prototype,r),o.NEED=!0),f(_,e),O[e]=_,a(a.G+a.W+a.F,O),v||m.setStrong(_,e,g),_}},b0dc:function(e,t,r){var n=r("e4ae");e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(i){var o=e["return"];throw void 0!==o&&n(o.call(e)),i}}},bfac:function(e,t,r){var n=r("0b64");e.exports=function(e,t){return new(n(e))(t)}},f228:function(e,t,r){var n=r("40c3"),a=r("4517");e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},fe1e:function(e,t,r){r("7075")("Map")}}]);