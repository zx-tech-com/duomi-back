(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad4798e2"],{8767:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$root.showLoadingIcon,expression:"$root.showLoadingIcon"}],staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 轮播图列表")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:t.handleAdd}},[t._v("新增轮播图")])],1),i("el-table",{staticClass:"table",attrs:{data:t.data,border:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",sortable:"",align:"center"}}),i("el-table-column",{attrs:{prop:"imgurl",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"100px",height:"60px"},attrs:{src:t.row.imgurl,alt:"图片加载失败"}})]}}])}),i("el-table-column",{attrs:{prop:"description",label:"描述"}}),i("el-table-column",{attrs:{prop:"url",label:"跳转地址"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),i("el-dialog",{attrs:{title:"修改轮播图",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"跳转地址"}},[i("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"原图片"}},[i("img",{attrs:{src:t.form.imgurl,alt:"呀,图片加载不出来",width:"200px",height:"200px"}})]),i("el-form-item",{attrs:{label:"轮播图"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",accept:"image/*",headers:t.$root.headers,"with-credentials":t.withCredentials,action:t.editUrl,data:t.editData,limit:t.limit,name:t.fileName,"file-list":t.fileList,"on-error":t.editFailure,"on-success":t.editSuccess,"on-exceed":t.onExceed,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"footer-center"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("提 交")])],1)])],1),i("el-dialog",{attrs:{title:"新增轮播图",visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"跳转地址"}},[i("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"轮播图"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",accept:"image/*",headers:t.$root.headers,"with-credentials":t.withCredentials,action:t.addUrl,data:t.addData,limit:t.limit,name:t.fileName,"file-list":t.fileList,"on-error":t.editFailure,"on-success":t.editSuccess,"on-exceed":t.onExceed,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"footer-center"},[i("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("提 交")])],1)])],1),i("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1)},s=[],a={name:"basetable",data:function(){return{url:"slideShow/listSlideShow",editUrl:"slideShow/updateSlideShow",delUrl:"slideShow/deleteSlideShow",addUrl:"slideShow/addSlideShow",banners:[],fileName:"img",fileList:[],limit:1,withCredentials:!0,addVisible:!1,editVisible:!1,delVisible:!1,form:{description:"",imgurl:"",url:"",id:null},waitToDel:{}}},created:function(){this.getRawBannerList(),this.editUrl=this.$urlConfig.baseUrl+this.editUrl,this.addUrl=this.$urlConfig.baseUrl+this.addUrl},computed:{data:function(){var t=this;return t.banners.map(function(e,i){return{index:i+1,id:e.id,imgurl:t.$util.getFullAttachmentUrl(e.imgurl),description:e.description,url:e.url}})},editData:function(){var t=this;return{id:t.form.id,description:t.form.description,url:t.form.url}},addData:function(){var t=this;return{description:t.form.description,url:t.form.url}}},methods:{getRawBannerList:function(){var t=this;t.$jsonAxios.get(t.url).then(function(e){t.$util.getSuccessHandler(e,t,"banners")}).catch(function(e){t.$util.axiosErrorHandler(e,t)})},handleAdd:function(){var t=this;t.fileList=[],t.form={},t.addVisible=!0},handleEdit:function(t,e){var i=this;i.idx=t;var l=i.data[t];i.form={description:l.description,imgurl:l.imgurl,url:l.url,id:l.id},i.fileList=[],i.editVisible=!0},handleDelete:function(t,e){this.waitToDel.idx=t,this.waitToDel.id=e.id,this.delVisible=!0},addSubmit:function(){this.$refs.upload.submit()},saveEdit:function(){var t=this;if(1==t.fileList.length)t.$refs.upload.submit();else{var e=t.$qs.stringify(t.editData);console.log(e),t.$jsonAxios.post(t.editUrl,e).then(function(e){var i=e.data;i.code==t.$util.success_code?t.$message.success("成功！"):t.$message.error("错误码："+i.code+" "+i.message),t.getRawBannerList(),t.editVisible=!1}).catch(function(t){})}},deleteRow:function(){var t=this,e=t.delUrl+"?id="+t.waitToDel.id;t.$jsonAxios.get(e).then(function(e){t.$util.signleDeleteSuccessHandler(e,t,"banners",t.waitToDel.idx),t.delVisible=!1}).catch(function(e){t.$util.axiosErrorHandler(e)})},editSuccess:function(t,e,i){var l=this;l.$util.checkIfResponseSuccess(t)?(l.$message.success("成功!"),l.getRawBannerList(),l.editVisible=!1,l.addVisible=!1):l.editFailure()},editFailure:function(t,e,i){this.$message.error("失败!")},onExceed:function(){this.$message.error("最多上传一张,请先删除左边的轮播图")}}},r=a,o=(i("d58b"),i("2877")),n=Object(o["a"])(r,l,s,!1,null,"02c8863c",null);n.options.__file="banner-list.vue";e["default"]=n.exports},"97be":function(t,e,i){},d58b:function(t,e,i){"use strict";var l=i("97be"),s=i.n(l);s.a}}]);