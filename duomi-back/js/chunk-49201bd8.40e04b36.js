(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49201bd8"],{"060b":function(e,t,i){},"8e34":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.$root.showLoadingIcon,expression:"$root.showLoadingIcon"}],staticClass:"table"},[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 投放点列表")])],1)],1),i("div",{staticClass:"container"},[i("el-table",{staticClass:"table",attrs:{data:e.data,border:""}},[i("el-table-column",{attrs:{prop:"index",label:"序号",sortable:"",align:"center",width:"140"}}),i("el-table-column",{attrs:{prop:"shortName",label:"投放点",align:"center",width:"200"}}),i("el-table-column",{attrs:{prop:"porderCabinetCount",label:"个人柜子数目",align:"center",width:"180"}}),i("el-table-column",{attrs:{prop:"cabinetCount",label:"柜子总数",align:"center",width:"140"}}),i("el-table-column",{attrs:{prop:"combosPerCabinet",label:"最大容量",align:"center",width:"140"}}),i("el-table-column",{attrs:{prop:"address",label:"具体地址",align:"center"}}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){e.gotoPlaceInfo(t.row)}}},[e._v("查看订单情况")])]}}])})],1)],1),i("el-dialog",{attrs:{title:"修改轮播图",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"跳转地址"}},[i("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"原图片"}},[i("img",{attrs:{src:e.form.imgurl,alt:"呀,图片加载不出来",width:"200px",height:"200px"}})]),i("el-form-item",{attrs:{label:"轮播图"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",accept:"image/*",headers:e.$root.headers,"with-credentials":e.withCredentials,action:e.editUrl,data:e.editData,limit:e.limit,name:e.fileName,"file-list":e.fileList,"on-error":e.editFailure,"on-success":e.editSuccess,"on-exceed":e.onExceed,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"footer-center"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("提 交")])],1)])],1),i("el-dialog",{attrs:{title:"新增轮播图",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),i("el-form-item",{attrs:{label:"跳转地址"}},[i("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"轮播图"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"list-type":"picture-card",accept:"image/*",headers:e.$root.headers,"with-credentials":e.withCredentials,action:e.addUrl,data:e.addData,limit:e.limit,name:e.fileName,"file-list":e.fileList,"on-error":e.editFailure,"on-success":e.editSuccess,"on-exceed":e.onExceed,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"footer-center"},[i("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addSubmit}},[e._v("提 交")])],1)])],1),i("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[i("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)},a=[],o={name:"basetable",data:function(){return{url:"cabinet/listDuomiPlace",editUrl:"slideShow/updateSlideShow",delUrl:"slideShow/deleteSlideShow",addUrl:"slideShow/addSlideShow",banners:[],duomiPlaces:[],fileName:"img",fileList:[],limit:1,withCredentials:!0,addVisible:!1,editVisible:!1,delVisible:!1,form:{description:"",imgurl:"",url:"",id:null},waitToDel:{}}},created:function(){this.getDuimiPlaceList(),this.editUrl=this.$urlConfig.baseUrl+this.editUrl,this.addUrl=this.$urlConfig.baseUrl+this.addUrl},computed:{data:function(){var e=this;return e.duomiPlaces.map(function(e,t){return{index:t+1,id:e.id,shortName:e.shortName,porderCabinetCount:e.porderCabinetCount,cabinetCount:e.cabinetCount,combosPerCabinet:e.combosPerCabinet,address:e.address}})},editData:function(){var e=this;return{id:e.form.id,description:e.form.description,url:e.form.url}},addData:function(){var e=this;return{description:e.form.description,url:e.form.url}}},methods:{getDuimiPlaceList:function(){var e=this;e.$jsonAxios.get(e.url).then(function(t){e.$util.getSuccessHandler(t,e,"duomiPlaces")}).catch(function(t){e.$util.axiosErrorHandler(t,e)})},handleAdd:function(){var e=this;e.fileList=[],e.form={},e.addVisible=!0},handleEdit:function(e,t){var i=this;i.idx=e;var l=i.data[e];i.form={description:l.description,imgurl:l.imgurl,url:l.url,id:l.id},i.fileList=[],i.editVisible=!0},handleDelete:function(e,t){this.waitToDel.idx=e,this.waitToDel.id=t.id,this.delVisible=!0},addSubmit:function(){this.$refs.upload.submit()},saveEdit:function(){var e=this;if(1==e.fileList.length)e.$refs.upload.submit();else{var t=e.$qs.stringify(e.editData);console.log(t),e.$jsonAxios.post(e.editUrl,t).then(function(t){var i=t.data;i.code==e.$util.success_code?e.$message.success("成功！"):e.$message.error("错误码："+i.code+" "+i.message),e.editVisible=!1}).catch(function(e){})}},deleteRow:function(){var e=this,t=e.delUrl+"?id="+e.waitToDel.id;e.$jsonAxios.get(t).then(function(t){e.$util.signleDeleteSuccessHandler(t,e,"banners",e.waitToDel.idx),e.delVisible=!1}).catch(function(t){e.$util.axiosErrorHandler(t)})},editSuccess:function(e,t,i){var l=this;l.$util.checkIfResponseSuccess(e)?(l.$message.success("成功!"),l.getRawBannerList(),l.editVisible=!1,l.addVisible=!1):l.editFailure()},editFailure:function(e,t,i){this.$message.error("失败!")},onExceed:function(){this.$message.error("最多上传一张,请先删除左边的轮播图")},gotoPlaceInfo:function(e){console.log(e),this.$router.push({path:"/placeinfo",query:{placeId:e.id}})}}},s=o,r=(i("e69c"),i("2877")),n=Object(r["a"])(s,l,a,!1,null,"7ac1ba64",null);n.options.__file="duomi-place-list.vue";t["default"]=n.exports},e69c:function(e,t,i){"use strict";var l=i("060b"),a=i.n(l);a.a}}]);